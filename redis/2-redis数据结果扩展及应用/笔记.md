

朋友圈点赞功能，

sebit 朋友圈id   用户id  1

用户id必须是数字

bitcount  朋友圈id 





缓存穿透：（数据库没有，缓存没有）（bitmaps）

查询一个压根儿就不存在的数据，就会一直去查询数据库。这个数据其实不能去查询数据库。

解决办法：

1，数据库没有查询到结果，就缓存一个空对象。（缓存空对象）避免一个key多次访问空对象

但是如果是不同的key，多次访问，那么也可能导致数据库崩，redis缓存大量空对象。

也就是治标不治本

2，布隆过滤器（idea中有谷歌提供的布隆过滤器）

布隆过滤器理解为一个集合，占用的内存很小，消耗性能低，底层实现就是位数组

误判率越低，消耗的内存越高；误判率越高，消耗的内存越低。

误判率和数组长度以及hash算法个数有关

根据什么字段查询最多，比如id，就将所有的id加入到布隆过滤器中。

虽然存在误判，即布隆过滤器放过一小部分的数据去查询数据库，但是这个是可以接受的。

谷歌布隆过滤器缺点：

1，不支持分布式；2，创建的空间占Java内存；3，因为是在内存中，重启之后数据就丢失了。

所以可以用redis

redis布隆过滤器缺点：

1，添加数据到数据库，还需要添加到布隆过滤器，维护麻烦。

2，数据库删除数据，布隆过滤器不能删除数据；随着时间的推移，数据会越来越多，所以需要定时替换布隆过滤器。



其他场景：

1，会员抽奖

第一步：判断是否是会员——》布隆过滤器

